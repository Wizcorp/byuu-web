<!doctypehtml><html lang=en-us><head><meta charset=utf-8><meta content="text/html; charset=utf-8"http-equiv=Content-Type><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,shrink-to-fit=no"name=viewport><meta content=yes name=apple-mobile-web-app-capable><meta content=black-translucent name=apple-mobile-web-app-status-bar-style><meta content=byuu name=apple-mobile-web-app-title><link href=./assets/icons/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link href=./assets/icons/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=./assets/icons/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link href=./assets/icons/site.webmanifest rel=manifest><link href=./assets/icons/safari-pinned-tab.svg rel=mask-icon color=#5bbad5><link href=./assets/icons/favicon.ico rel="shortcut icon"><meta content=#ffffff name=msapplication-TileColor><meta content=./assets/icons/browserconfig.xml name=msapplication-config><meta content=#000000 name=theme-color><title>byuu \\ web</title><script>"false"===window.location.href.includes("localhost")&&navigator.serviceWorker.register("./service-worker.js",{scope:"./"}).then(e=>console.log("Registration succeeded. Scope is "+e.scope)).catch(e=>console.error("Registration failed with "+e))</script><link href=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css rel=stylesheet crossorigin=anonymous integrity=sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm><script src=https://code.jquery.com/jquery-3.2.1.slim.min.js crossorigin=anonymous integrity=sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN></script><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js crossorigin=anonymous integrity=sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q></script><script src=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js crossorigin=anonymous integrity=sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl></script><script src=https://unpkg.com/fpsmeter@0.3.1/dist/fpsmeter.min.js crossorigin=anonymous></script><link href="https://fonts.googleapis.com/css2?family=Muli:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Press+Start+2P&display=swap"rel=stylesheet><style>*{touch-action:none!important}.btn:active,.btn:focus{outline:0;box-shadow:none}.btn{font-style:normal}body{position:absolute;display:flex;flex-wrap:wrap;align-items:center;justify-content:center;top:0;bottom:0;left:0;right:0;padding:0;margin:0;background:#070708;font-family:Muli,sans-serif}body.mobile{display:block}#main{position:absolute;top:0;bottom:166px;left:0;right:0}.fullscreen #main,.mobile #main{bottom:0}#fpsWrapper{position:absolute;top:0;right:0}#pauseMenuButton{display:none;position:absolute;z-index:101;left:calc(50% - 20px);bottom:20px;width:40px;height:40px;border-radius:20px;background:rgba(100,100,100,.5) url(assets/images/menu.png) 50% 50% no-repeat;background-size:24px}.mobile #pauseMenuButton{display:block}@media screen and (orientation:landscape){#pauseMenuButton{left:20px;top:20px;bottom:auto}}#pauseMenu{position:absolute;z-index:102;left:0;bottom:0;width:100%;background-color:#000}#closePauseMenuButton{display:none;position:absolute;top:-60px;left:calc(50% - 20px);width:40px;height:40px;border-radius:20px;background:rgba(100,100,100,.5) url(assets/images/arrowDown.png) 50% 50% no-repeat;background-size:24px}.mobile #closePauseMenuButton{display:block}#actions{width:100%}.fullscreen #actions{position:absolute;display:block;bottom:0;left:0;opacity:0;transition:opacity ease-out 125ms;transition-delay:3s;z-index:999}.fullscreen #actions:hover{opacity:1;transition:opacity ease-in 250ms}#game-selector-container{width:100%}#game-selector-container .arrow{position:absolute;display:block;pointer-events:none;padding:8px 6px;font-size:20px;text-shadow:-1px 1px 0 #000}#game-selector:empty{display:none}#game-selector{width:100%;padding:10px 10px 10px 30px;border-top:2px solid #000;border-bottom:2px solid #000;border-left:0 none;border-right:0 none;border-radius:0;background:#343434;-webkit-appearance:none;font-family:'Press Start 2P',cursive;color:#f7f8ee}#actions .btn-group{display:flex}#actions .btn-group .btn{flex:1;border-radius:0;margin-left:1px;margin-bottom:1px}#actions .btn-group .btn:first-child{margin-left:0}#settingsArea{display:none;padding:2px;background-color:#6c757d;color:#fff;font-size:14px}#settingsArea.show{display:block}#settingsArea .settingEntry{display:flex;flex-direction:row;background-color:#5a6268;margin:4px;padding:4px}#settingsArea .settingEntry.mobileSetting{display:none}.mobile #settingsArea .settingEntry.mobileSetting{display:flex}#settingsArea .settingEntry.desktopSetting{display:flex}.mobile #settingsArea .settingEntry.desktopSetting{display:none}#settingsArea #core-specific-settings>div{display:none;width:100%}#settingsArea .label{flex:1;text-align:right;padding-right:10px}#settingsArea .values{flex:1}#settingsArea input[type=radio]{display:none}#settingsArea label{display:inline-block;background-color:#343434;padding:2px 4px;margin:0 2px;cursor:pointer}#settingsArea input[type=radio]:checked+label{background-color:#eb5505}#settingsArea input[type=range]{-webkit-appearance:none;width:100px;background:0 0}#settingsArea input[type=range]::-webkit-slider-runnable-track{width:100%;height:20px;background-color:#343434;border-radius:5px}#settingsArea input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;height:20px;width:20px;background:#eb5505;border-radius:5px}#game-files{display:none}#cpuprofiler{position:absolute;display:none;width:100%;top:0;opacity:.8;z-index:999}#cpuprofiler.show{display:block}#cpuprofiler canvas{width:95%}#display{position:relative;display:flex;flex-direction:column;flex-wrap:wrap;align-items:flex-start;height:100%}.fullscreen #display{position:absolute;top:0;bottom:0;left:0;right:0}#display #canvas{background-color:#070708;transition:opacity ease-out 125ms,filter ease-out 125ms;image-rendering:pixelated;height:100%;width:100%;object-fit:contain}.mobile #display #canvas{object-position:50% 0}.paused #canvas{opacity:.5;filter:blur(3px) saturate(.5);transition:opacity ease-in 125ms,filter ease-in 125ms}#game-loading{position:absolute;z-index:2;display:none;width:300px;height:45px;top:calc(50% - 16px);left:calc(50% - 150px);font-size:32px;font-family:'Press Start 2P',cursive;color:#f7f8ee;text-align:center;background-color:rgba(0,0,0,.75)}#notification-box{z-index:3;overflow:hidden;position:absolute;display:flex;flex-wrap:wrap;align-items:center;justify-content:center;top:30px;bottom:30px;left:30px;right:30px;pointer-events:none}#notification-box .container{flex-wrap:wrap;align-items:center;justify-content:center}.fullscreen #notification-box .container{transform:scale(2)}#notification-box .container .alert{opacity:0;transform:scale(0);transition:opacity cubic-bezier(.165,.84,.44,1) 250ms,transform cubic-bezier(.165,.84,.44,1) 250ms;background-color:rgba(255,255,255,.8);border-width:5px;border-radius:10px;overflow-wrap:break-word;filter:brightness(1.5) saturate(1.5);box-shadow:0 0 10px #070708}#notification-box .container .alert h1{-webkit-font-smoothing:subpixel-antialiased;-webkit-text-stroke:.5px;font-size:1.8em}#notification-box .container .alert p{color:#000;font-size:1.2em;-webkit-text-stroke:.25px;-webkit-font-smoothing:subpixel-antialiased;text-shadow:0 0 5px rgba(0,0,0,.5);margin-bottom:5px}#notification-box .container .alert.show{opacity:1;transform:scale(1)}#keymaps{position:absolute;display:none;top:calc(50% - 150px);left:0;width:100%}#keymaps>div{position:relative;display:none;flex-wrap:wrap;max-width:700px;border:3px solid #e94f37;border-radius:10px;padding:20px 10px 10px;margin:0 auto;background:rgba(16,17,18,.75)}.fullscreen #keymaps>div{transform:scale(2)}.keymap{display:block;margin:0 20px 10px}.keymap .button{display:inline-block;background:#393e41;color:#f7f8ee;padding:5px 10px;text-align:center;border-radius:5px}.keymap .key{display:inline-block;color:#f7f8ee;margin-left:10px}#virtualGamepad{display:none;position:absolute;left:0;bottom:0;width:100vw;height:75vw;touch-action:none}#virtualGamepad.position_high{bottom:25vw}#virtualGamepad .button{box-sizing:border-box;position:absolute;background:url(assets/images/gamepad/buttonCircle.png) 50% 50% no-repeat;background-size:contain;width:10vw;height:10vw;pointer-events:none;transform:translate(-5vw,-5vw);opacity:.7}#virtualGamepad .button.pressed{opacity:1}#virtualGamepad .button_Left{background-image:url(assets/images/gamepad/buttonTriangleLeft.png)}#virtualGamepad .button_Right{background-image:url(assets/images/gamepad/buttonTriangleRight.png)}#virtualGamepad .button_Up{background-image:url(assets/images/gamepad/buttonTriangleUp.png)}#virtualGamepad .button_Down{background-image:url(assets/images/gamepad/buttonTriangleDown.png)}#virtualGamepad .button_L,#virtualGamepad .button_Microphone,#virtualGamepad .button_Mode,#virtualGamepad .button_R,#virtualGamepad .button_Select,#virtualGamepad .button_Start{background-image:url(assets/images/gamepad/buttonRectangle.png);width:20vw;height:10vw;line-height:10vw;transform:translate(-10vw,-5vw)}#virtualGamepad .button_Microphone{display:none;text-align:center;filter:grayscale(100%) brightness(120%) sepia(100%) hue-rotate(-100deg) saturate(600%) contrast(2)}#virtualGamepad .console{display:none}#virtualGamepad .console.show{display:block}#virtualGamepad .console[data-console=Famicom] .button_Left{left:12.5%;top:50%}#virtualGamepad .console[data-console=Famicom] .button_Right{left:37.5%;top:50%}#virtualGamepad .console[data-console=Famicom] .button_Up{left:25%;top:33.333%}#virtualGamepad .console[data-console=Famicom] .button_Down{left:25%;top:66.666%}#virtualGamepad .console[data-console=Famicom] .button_A{left:85%;top:50%}#virtualGamepad .console[data-console=Famicom] .button_B{left:65%;top:50%}#virtualGamepad .console[data-console=Famicom] .button_Select{left:11%;top:92%}#virtualGamepad .console[data-console=Famicom] .button_Start{left:89%;top:92%}#virtualGamepad .console[data-console=Famicom] .button_Microphone{left:50%;top:15%}#virtualGamepad .console[data-console="Super Famicom"] .button_Left{left:12.5%;top:50%}#virtualGamepad .console[data-console="Super Famicom"] .button_Right{left:37.5%;top:50%}#virtualGamepad .console[data-console="Super Famicom"] .button_Up{left:25%;top:33.333%}#virtualGamepad .console[data-console="Super Famicom"] .button_Down{left:25%;top:66.666%}#virtualGamepad .console[data-console="Super Famicom"] .button_A{left:87.5%;top:50%}#virtualGamepad .console[data-console="Super Famicom"] .button_B{left:75%;top:66.666%}#virtualGamepad .console[data-console="Super Famicom"] .button_X{left:75%;top:33.333%}#virtualGamepad .console[data-console="Super Famicom"] .button_Y{left:62.5%;top:50%}#virtualGamepad .console[data-console="Super Famicom"] .button_L{left:11%;top:8%}#virtualGamepad .console[data-console="Super Famicom"] .button_R{left:89%;top:8%}#virtualGamepad .console[data-console="Super Famicom"] .button_Select{left:11%;top:92%}#virtualGamepad .console[data-console="Super Famicom"] .button_Start{left:89%;top:92%}#virtualGamepad .console[data-console="Mega Drive"] .button_Left{left:12.5%;top:50%}#virtualGamepad .console[data-console="Mega Drive"] .button_Right{left:37.5%;top:50%}#virtualGamepad .console[data-console="Mega Drive"] .button_Up{left:25%;top:33.333%}#virtualGamepad .console[data-console="Mega Drive"] .button_Down{left:25%;top:66.666%}#virtualGamepad .console[data-console="Mega Drive"] .button_A{left:67.5%;top:70%}#virtualGamepad .console[data-console="Mega Drive"] .button_B{left:80%;top:60%}#virtualGamepad .console[data-console="Mega Drive"] .button_C{left:92.5%;top:50%}#virtualGamepad .console[data-console="Mega Drive"] .button_X{left:57.5%;top:50%}#virtualGamepad .console[data-console="Mega Drive"] .button_Y{left:70%;top:40%}#virtualGamepad .console[data-console="Mega Drive"] .button_Z{left:82.5%;top:30%}#virtualGamepad .console[data-console="Mega Drive"] .button_Mode{left:11%;top:92%}#virtualGamepad .console[data-console="Mega Drive"] .button_Start{left:89%;top:92%}#virtualGamepad.md3Buttons .console[data-console="Mega Drive"] .button_Left{left:12.5%;top:50%}#virtualGamepad.md3Buttons .console[data-console="Mega Drive"] .button_Right{left:37.5%;top:50%}#virtualGamepad.md3Buttons .console[data-console="Mega Drive"] .button_Up{left:25%;top:33.333%}#virtualGamepad.md3Buttons .console[data-console="Mega Drive"] .button_Down{left:25%;top:66.666%}#virtualGamepad.md3Buttons .console[data-console="Mega Drive"] .button_A{left:62.5%;top:60%}#virtualGamepad.md3Buttons .console[data-console="Mega Drive"] .button_B{left:75%;top:50%}#virtualGamepad.md3Buttons .console[data-console="Mega Drive"] .button_C{left:87.55%;top:40%}#virtualGamepad.md3Buttons .console[data-console="Mega Drive"] .button_Start{left:89%;top:92%}#virtualGamepad.colored .console[data-console=Famicom] .button_A{filter:grayscale(100%) brightness(40%) sepia(100%) hue-rotate(-50deg) saturate(600%) contrast(.8)}#virtualGamepad.colored .console[data-console=Famicom] .button_B{filter:grayscale(100%) brightness(40%) sepia(100%) hue-rotate(-50deg) saturate(600%) contrast(.8)}#virtualGamepad.colored .console[data-console="Super Famicom"] .button_A{filter:grayscale(100%) brightness(40%) sepia(100%) hue-rotate(-50deg) saturate(600%) contrast(.8)}#virtualGamepad.colored .console[data-console="Super Famicom"] .button_B{filter:grayscale(100%) brightness(120%) sepia(90%) hue-rotate(5deg) saturate(500%) contrast(.7)}#virtualGamepad.colored .console[data-console="Super Famicom"] .button_X{filter:grayscale(100%) brightness(30%) sepia(100%) hue-rotate(-180deg) saturate(700%) contrast(.8)}#virtualGamepad.colored .console[data-console="Super Famicom"] .button_Y{filter:grayscale(100%) brightness(40%) sepia(100%) hue-rotate(50deg) saturate(1000%) contrast(.8)}@media (orientation:landscape){#virtualGamepad{height:37.5vw}#virtualGamepad.position_high{bottom:12.5vw}#virtualGamepad .button{width:5vw;height:5vw;transform:translate(-2.5vw,-2.5vw)}#virtualGamepad .button_L,#virtualGamepad .button_Microphone,#virtualGamepad .button_Mode,#virtualGamepad .button_R,#virtualGamepad .button_Select,#virtualGamepad .button_Start{width:10vw;height:5vw;line-height:5vw;transform:translate(-5vw,-2.5vw)}#virtualGamepad .console[data-console=Famicom] .button_Left{left:6.25%;top:50%}#virtualGamepad .console[data-console=Famicom] .button_Right{left:18.75%;top:50%}#virtualGamepad .console[data-console=Famicom] .button_Up{left:12.5%;top:33.333%}#virtualGamepad .console[data-console=Famicom] .button_Down{left:12.5%;top:66.666%}#virtualGamepad .console[data-console=Famicom] .button_A{left:92.5%;top:50%}#virtualGamepad .console[data-console=Famicom] .button_B{left:82.5%;top:50%}#virtualGamepad .console[data-console=Famicom] .button_Select{left:5.5%;top:92%}#virtualGamepad .console[data-console=Famicom] .button_Start{left:94.5%;top:92%}#virtualGamepad .console[data-console=Famicom] .button_Microphone{left:87.75%;top:25%}#virtualGamepad .console[data-console="Super Famicom"] .button_Left{left:6.25%;top:50%}#virtualGamepad .console[data-console="Super Famicom"] .button_Right{left:18.75%;top:50%}#virtualGamepad .console[data-console="Super Famicom"] .button_Up{left:12.5%;top:33.333%}#virtualGamepad .console[data-console="Super Famicom"] .button_Down{left:12.5%;top:66.666%}#virtualGamepad .console[data-console="Super Famicom"] .button_A{left:93.75%;top:50%}#virtualGamepad .console[data-console="Super Famicom"] .button_B{left:87.5%;top:66.666%}#virtualGamepad .console[data-console="Super Famicom"] .button_X{left:87.5%;top:33.333%}#virtualGamepad .console[data-console="Super Famicom"] .button_Y{left:81.25%;top:50%}#virtualGamepad .console[data-console="Super Famicom"] .button_L{left:5.5%;top:8%}#virtualGamepad .console[data-console="Super Famicom"] .button_R{left:94.5%;top:8%}#virtualGamepad .console[data-console="Super Famicom"] .button_Select{left:5.5%;top:92%}#virtualGamepad .console[data-console="Super Famicom"] .button_Start{left:94.5%;top:92%}#virtualGamepad .console[data-console="Mega Drive"] .button_Left{left:6.25%;top:50%}#virtualGamepad .console[data-console="Mega Drive"] .button_Right{left:18.75%;top:50%}#virtualGamepad .console[data-console="Mega Drive"] .button_Up{left:12.5%;top:33.333%}#virtualGamepad .console[data-console="Mega Drive"] .button_Down{left:12.5%;top:66.666%}#virtualGamepad .console[data-console="Mega Drive"] .button_A{left:83.75%;top:70%}#virtualGamepad .console[data-console="Mega Drive"] .button_B{left:90%;top:60%}#virtualGamepad .console[data-console="Mega Drive"] .button_C{left:96.25%;top:50%}#virtualGamepad .console[data-console="Mega Drive"] .button_X{left:78.75%;top:50%}#virtualGamepad .console[data-console="Mega Drive"] .button_Y{left:85%;top:40%}#virtualGamepad .console[data-console="Mega Drive"] .button_Z{left:91.25%;top:30%}#virtualGamepad .console[data-console="Mega Drive"] .button_Mode{left:5.5%;top:92%}#virtualGamepad .console[data-console="Mega Drive"] .button_Start{left:94.5%;top:92%}#virtualGamepad.md3Buttons .console[data-console="Mega Drive"] .button_Left{left:6.25%;top:50%}#virtualGamepad.md3Buttons .console[data-console="Mega Drive"] .button_Right{left:18.75%;top:50%}#virtualGamepad.md3Buttons .console[data-console="Mega Drive"] .button_Up{left:12.5%;top:33.333%}#virtualGamepad.md3Buttons .console[data-console="Mega Drive"] .button_Down{left:12.5%;top:66.666%}#virtualGamepad.md3Buttons .console[data-console="Mega Drive"] .button_A{left:81.25%;top:60%}#virtualGamepad.md3Buttons .console[data-console="Mega Drive"] .button_B{left:87.5%;top:50%}#virtualGamepad.md3Buttons .console[data-console="Mega Drive"] .button_C{left:93.75%;top:40%}#virtualGamepad.md3Buttons .console[data-console="Mega Drive"] .button_Start{left:94.5%;top:92%}}#overlay{background:#f7f8ee;opacity:1;z-index:999;position:fixed;display:flex;flex-wrap:wrap;align-items:center;justify-content:center;top:0;bottom:0;left:0;right:0;transition:opacity ease-out 250ms}figure{overflow:hidden;height:150px;width:200px;padding:5px;margin:0 auto}#status{color:#393e41;margin:0 auto;display:block;width:100%;text-align:center;font-size:3em;font-weight:700}.spinner{background-color:#f7f8ee;position:relative;border-radius:50%;display:inline-block;height:300px;width:200px;box-sizing:border-box;text-align:center;padding:20px}.spinner:before{border-radius:50%;content:"";clip-path:inset(0 0 0 0);animation:spin 1s linear infinite;width:200px;height:200px;top:-5px;left:-5px;position:absolute;z-index:-1;padding:5px}@keyframes spin{0%{background-image:linear-gradient(to bottom,#e94f37 0,#00d4ff 100%);transform:rotate(0)}100%{background-image:linear-gradient(to bottom,#e94f37 0,#00d4ff 100%);transform:rotate(360deg)}}</style></head><body class=paused><div id=overlay><div class=container><figure id=spinner><div class=spinner></div></figure><div id=status>Downloading</div></div></div><div id=fpsWrapper></div><div id=pauseMenuButton style=display:none></div><div id=pauseMenu style=display:block><div id=closePauseMenuButton></div><div id=actions><div id=game-selector-container><div class=arrow>▼︎</div><select id=game-selector></select></div><div class=btn-group aria-label=Options role=group><button class="btn btn-secondary"id=start type=button>Start</button><button class="btn btn-secondary"id=pause type=button>Pause</button><button class="btn btn-secondary"id=fullscreen type=button>Fullscreen</button><label class="btn btn-secondary"id=add><input id=game-files name=files[] type=file multiple><span>Add ROMS</span></label></div><div class=btn-group aria-label=Options role=group><button class="btn btn-secondary"id=save-state type=button>Save state</button><button class="btn btn-secondary"id=load-state type=button>Load state</button><button class="btn btn-secondary"id=settings type=button>Settings</button><button class="btn btn-secondary"id=toggle-keymap type=button>Show keymap</button><button class="btn btn-secondary"id=show-profiler type=button>Profiler</button></div><div id=settingsArea><form name=settingsForm><div class="settingEntry mobileSetting"><div class=label>Gamepad opacity</div><div class=values><input id=""name=gamepadOpacity type=range value=0.7 max=1 min=0 step=0.01></div></div><div class="settingEntry mobileSetting"><div class=label>Gamepad colored</div><div class=values><input id=gamepadColored_off name=gamepadColored type=radio value=off checked><label for=gamepadColored_off>Off</label><input id=gamepadColored_on name=gamepadColored type=radio value=on><label for=gamepadColored_on>On</label></div></div><div class="settingEntry mobileSetting"><div class=label>Gamepad position</div><div class=values><input id=gamepadPosition_low name=gamepadPosition type=radio value=low checked><label for=gamepadPosition_low>Low</label><input id=gamepadPosition_high name=gamepadPosition type=radio value=high><label for=gamepadPosition_high>High</label></div></div><div class="settingEntry mobileSetting"><div class=label>Mega Drive layout</div><div class=values><input id=md6Buttons name=specialLayout type=radio value=md6Buttons checked><label for=md6Buttons>6 buttons</label><input id=md3Buttons name=specialLayout type=radio value=md3Buttons><label for=md3Buttons>3 buttons</label></div></div><div class="settingEntry mobileSetting"><div class=label>Gamepad touch area</div><div class=values><input id=touchArea_narrow name=touchArea type=radio value=narrow><label for=touchArea_narrow>Narrow</label><input id=touchArea_wide name=touchArea type=radio value=wide><label for=touchArea_wide>Wide</label><input id=touchArea_full name=touchArea type=radio value=full checked><label for=touchArea_full>Full</label></div></div><div class=settingEntry><div class=label>Volume</div><div class=values><input id=volume name=volume type=range value=100 max=100 min=0 step=1> <input id=mute name=mute type=checkbox><label for=mute>Mute</label></div><div class=label>GUI</div><div class=values><input id=fps name=fps type=checkbox checked><label for=fps>Show FPS counter</label></div></div><div class=settingEntry id=core-specific-settings><div data-console=Famicom><div class=label>FC Core</div><div class=values><input id=fc-mic name=fc-mic type=checkbox><label for=fc-mic>Show mic button</label><input id=fc-overscan name=fc-overscan type=checkbox><label for=fc-overscan>Overscan</label><input id=fc-skipframe name=fc-skipframe type=checkbox><label for=fc-skipframe>Skip frame</label><input id=fc-synconce name=fc-synconce type=checkbox checked><label for=fc-synconce>CPU - Sync once per cycle</label><select id=fc-overclock name=fc-overclock><option value=0.25>0.25</option><option value=0.5>0.5</option><option value=0.75>0.75</option><option value=1 selected>1</option><option value=1.5>1.5</option><option value=2>2</option></select><label for=fc-overclock>Overclock</label></div></div><div data-console="Super Famicom"><div class=label>SFC Core</div><div class=values><input id=sfc-fastmath name=sfc-fastmath type=checkbox checked><label for=sfc-fastmath>Fast math</label><select id=sfc-cpu-overclock name=sfc-cpu-overclock><option value=0.25>0.25</option><option value=0.5>0.5</option><option value=0.75>0.75</option><option value=1 selected>1</option><option value=1.5>1.5</option><option value=2>2</option></select><label for=sfc-cpu-overclock>CPU Overclock</label><select id=sfc-ppu-overclock name=sfc-ppu-overclock><option value=0.25>0.25</option><option value=0.5>0.5</option><option value=0.75>0.75</option><option value=1 selected>1</option><option value=1.5>1.5</option><option value=2>2</option></select><label for=sfc-ppu-overclock>PPU Overclock</label><select id=sfc-dsp-overclock name=sfc-dsp-overclock><option value=0.25>0.25</option><option value=0.5>0.5</option><option value=0.75>0.75</option><option value=1 selected>1</option><option value=1.5>1.5</option><option value=2>2</option></select><label for=sfc-dsp-overclock>DSP Overclock</label><input id=sfc-lockstep name=sfc-lockstep type=checkbox checked><label for=sfc-lockstep>Lockstep</label><input id=sfc-skipframe name=sfc-skipframe type=checkbox><label for=sfc-skipframe>Skip frame</label><input id=sfc-dsp name=sfc-dsp type=checkbox checked><label for=sfc-dsp>DSP</label></div></div><div data-console="Mega Drive"><div class=label>Mega Drive Core</div><div class=values><input id=md-skipframe name=md-skipframe type=checkbox><label for=md-skipframe>Skip frame</label><select id=md-cpu-overclock name=md-cpu-overclock><option value=0.25>0.25</option><option value=0.5>0.5</option><option value=0.75>0.75</option><option value=1 selected>1</option><option value=1.5>1.5</option><option value=2>2</option></select><label for=md-cpu-overclock>CPU Overclock</label><select id=md-apu-overclock name=md-apu-overclock><option value=0.25>0.25</option><option value=0.5>0.5</option><option value=0.75>0.75</option><option value=1 selected>1</option><option value=1.5>1.5</option><option value=2>2</option></select><label for=md-apu-overclock>APU Overclock</label><select id=md-vdp-overclock name=md-vdp-overclock><option value=0.25>0.25</option><option value=0.5>0.5</option><option value=0.75>0.75</option><option value=1 selected>1</option><option value=1.5>1.5</option><option value=2>2</option></select><label for=md-vdp-overclock>VDP Overclock</label></div></div></div></form></div></div></div><div id=main><div id=display><canvas id=canvas oncontextmenu=event.preventDefault() tabindex=-1></canvas><div id=game-loading>Loading</div><div id=notification-box><div class=container></div></div></div><div id=keymaps><div data-console=Famicom data-port="Controller Port 1"data-type=Gamepad><div class=keymap><span class=button>Up</span><span class=key>W</span></div><div class=keymap><span class=button>Left</span><span class=key>A</span></div><div class=keymap><span class=button>Down</span><span class=key>S</span></div><div class=keymap><span class=button>Right</span><span class=key>D</span></div><div class=keymap><span class=button>A</span><span class=key>K</span></div><div class=keymap><span class=button>B</span><span class=key>L</span></div><div class=keymap><span class=button>Select</span><span class=key>Backspace</span></div><div class=keymap><span class=button>Start</span><span class=key>Enter</span></div><div class=keymap><span class=button>Microphone</span><span class=key>P</span></div></div><div data-console="Super Famicom"data-port="Controller Port 1"data-type=Gamepad><div class=keymap><span class=button>Up</span><span class=key>W</span></div><div class=keymap><span class=button>Left</span><span class=key>A</span></div><div class=keymap><span class=button>Down</span><span class=key>S</span></div><div class=keymap><span class=button>Right</span><span class=key>D</span></div><div class=keymap><span class=button>L</span><span class=key>9</span></div><div class=keymap><span class=button>R</span><span class=key>0</span></div><div class=keymap><span class=button>X</span><span class=key>O</span></div><div class=keymap><span class=button>Y</span><span class=key>P</span></div><div class=keymap><span class=button>A</span><span class=key>K</span></div><div class=keymap><span class=button>B</span><span class=key>L</span></div><div class=keymap><span class=button>Select</span><span class=key>Backspace</span></div><div class=keymap><span class=button>Start</span><span class=key>Enter</span></div></div><div data-console="Mega Drive"data-port="Controller Port 1"data-type="Fighting Pad"><div class=keymap><span class=button>Up</span><span class=key>W</span></div><div class=keymap><span class=button>Left</span><span class=key>A</span></div><div class=keymap><span class=button>Down</span><span class=key>S</span></div><div class=keymap><span class=button>Right</span><span class=key>D</span></div><div class=keymap><span class=button>X</span><span class=key>I</span></div><div class=keymap><span class=button>Y</span><span class=key>O</span></div><div class=keymap><span class=button>Z</span><span class=key>P</span></div><div class=keymap><span class=button>A</span><span class=key>J</span></div><div class=keymap><span class=button>B</span><span class=key>K</span></div><div class=keymap><span class=button>C</span><span class=key>L</span></div><div class=keymap><span class=button>Mode</span><span class=key>Backspace</span></div><div class=keymap><span class=button>Start</span><span class=key>Enter</span></div></div></div></div><div id=virtualGamepad style=opacity:.7><div class=console data-console=Famicom data-orientation=portrait data-port="Controller Port 1"data-type=Gamepad><div class="button button_Left"data-label=Left data-x=12.5 data-y=50></div><div class="button button_Right"data-label=Right data-x=37.5 data-y=50></div><div class="button button_Up"data-label=Up data-x=25 data-y=33.333></div><div class="button button_Down"data-label=Down data-x=25 data-y=66.666></div><div class="button button_A"data-label=A data-x=85 data-y=50></div><div class="button button_B"data-label=B data-x=65 data-y=50></div><div class="button button_Select"data-label=Select data-x=11 data-y=92></div><div class="button button_Start"data-label=Start data-x=94.5 data-y=92></div><div class="button button_Microphone"data-label=Microphone data-x=50 data-y=15>🎤</div></div><div class=console data-console=Famicom data-orientation=landscape data-port="Controller Port 1"data-type=Gamepad><div class="button button_Left"data-label=Left data-x=6.25 data-y=50></div><div class="button button_Right"data-label=Right data-x=18.75 data-y=50></div><div class="button button_Up"data-label=Up data-x=12.5 data-y=33.333></div><div class="button button_Down"data-label=Down data-x=12.5 data-y=66.666></div><div class="button button_A"data-label=A data-x=92.5 data-y=50></div><div class="button button_B"data-label=B data-x=82.5 data-y=50></div><div class="button button_Select"data-label=Select data-x=5.5 data-y=92></div><div class="button button_Start"data-label=Start data-x=94.5 data-y=92></div><div class="button button_Microphone"data-label=Microphone data-x=87.75 data-y=25>🎤</div></div><div class=console data-console="Super Famicom"data-orientation=portrait data-port="Controller Port 1"data-type=Gamepad><div class="button button_Left"data-label=Left data-x=12.5 data-y=50></div><div class="button button_Right"data-label=Right data-x=37.5 data-y=50></div><div class="button button_Up"data-label=Up data-x=25 data-y=33.333></div><div class="button button_Down"data-label=Down data-x=25 data-y=66.666></div><div class="button button_A"data-label=A data-x=87.5 data-y=50></div><div class="button button_B"data-label=B data-x=75 data-y=66.666></div><div class="button button_X"data-label=X data-x=75 data-y=33.333></div><div class="button button_Y"data-label=Y data-x=62.5 data-y=50></div><div class="button button_L"data-label=L data-x=11 data-y=8></div><div class="button button_R"data-label=R data-x=89 data-y=8></div><div class="button button_Select"data-label=Select data-x=11 data-y=92></div><div class="button button_Start"data-label=Start data-x=89 data-y=92></div></div><div class=console data-console="Super Famicom"data-orientation=landscape data-port="Controller Port 1"data-type=Gamepad><div class="button button_Left"data-label=Left data-x=6.25 data-y=50></div><div class="button button_Right"data-label=Right data-x=18.75 data-y=50></div><div class="button button_Up"data-label=Up data-x=12.5 data-y=33.333></div><div class="button button_Down"data-label=Down data-x=12.5 data-y=66.666></div><div class="button button_A"data-label=A data-x=93.75 data-y=50></div><div class="button button_B"data-label=B data-x=87.5 data-y=66.666></div><div class="button button_X"data-label=X data-x=87.5 data-y=33.333></div><div class="button button_Y"data-label=Y data-x=81.25 data-y=50></div><div class="button button_L"data-label=L data-x=5.5 data-y=8></div><div class="button button_R"data-label=R data-x=94.5 data-y=8></div><div class="button button_Select"data-label=Select data-x=5.5 data-y=92></div><div class="button button_Start"data-label=Start data-x=94.5 data-y=92></div></div><div class=console data-console="Mega Drive"data-orientation=portrait data-port="Controller Port 1"data-type="Fighting Pad"data-layout=md6Buttons><div class="button button_Left"data-label=Left data-x=12.5 data-y=50></div><div class="button button_Right"data-label=Right data-x=37.5 data-y=50></div><div class="button button_Up"data-label=Up data-x=25 data-y=33.333></div><div class="button button_Down"data-label=Down data-x=25 data-y=66.666></div><div class="button button_A"data-label=A data-x=67.5 data-y=70></div><div class="button button_B"data-label=B data-x=80 data-y=60></div><div class="button button_C"data-label=C data-x=92.5 data-y=50></div><div class="button button_X"data-label=X data-x=57.5 data-y=50></div><div class="button button_Y"data-label=Y data-x=70 data-y=40></div><div class="button button_Z"data-label=Z data-x=82.5 data-y=30></div><div class="button button_Mode"data-label=Mode data-x=11 data-y=92></div><div class="button button_Start"data-label=Start data-x=89 data-y=92></div></div><div class=console data-console="Mega Drive"data-orientation=landscape data-port="Controller Port 1"data-type="Fighting Pad"data-layout=md6Buttons><div class="button button_Left"data-label=Left data-x=6.25 data-y=50></div><div class="button button_Right"data-label=Right data-x=18.75 data-y=50></div><div class="button button_Up"data-label=Up data-x=12.5 data-y=33.333></div><div class="button button_Down"data-label=Down data-x=12.5 data-y=66.666></div><div class="button button_A"data-label=A data-x=83.75 data-y=70></div><div class="button button_B"data-label=B data-x=90 data-y=60></div><div class="button button_C"data-label=C data-x=96.25 data-y=50></div><div class="button button_X"data-label=X data-x=78.75 data-y=50></div><div class="button button_Y"data-label=Y data-x=85 data-y=40></div><div class="button button_Z"data-label=Z data-x=91.25 data-y=30></div><div class="button button_Mode"data-label=Mode data-x=5.5 data-y=92></div><div class="button button_Start"data-label=Start data-x=94.5 data-y=92></div></div><div class=console data-console="Mega Drive"data-orientation=portrait data-port="Controller Port 1"data-type="Fighting Pad"data-layout=md3Buttons><div class="button button_Left"data-label=Left data-x=12.5 data-y=50></div><div class="button button_Right"data-label=Right data-x=37.5 data-y=50></div><div class="button button_Up"data-label=Up data-x=25 data-y=33.333></div><div class="button button_Down"data-label=Down data-x=25 data-y=66.666></div><div class="button button_A"data-label=A data-x=62.5 data-y=60></div><div class="button button_B"data-label=B data-x=75 data-y=50></div><div class="button button_C"data-label=C data-x=87.5 data-y=40></div><div class="button button_Start"data-label=Start data-x=89 data-y=92></div></div><div class=console data-console="Mega Drive"data-orientation=landscape data-port="Controller Port 1"data-type="Fighting Pad"data-layout=md3Buttons><div class="button button_Left"data-label=Left data-x=6.25 data-y=50></div><div class="button button_Right"data-label=Right data-x=18.75 data-y=50></div><div class="button button_Up"data-label=Up data-x=12.5 data-y=33.333></div><div class="button button_Down"data-label=Down data-x=12.5 data-y=66.666></div><div class="button button_A"data-label=A data-x=81.25 data-y=60></div><div class="button button_B"data-label=B data-x=87.5 data-y=50></div><div class="button button_C"data-label=C data-x=93.75 data-y=40></div><div class="button button_Start"data-label=Start data-x=94.5 data-y=92></div></div></div><script>const LAST_GAME="last-game",canvas=document.getElementById("canvas"),getContext=canvas.getContext.bind(canvas);canvas.getContext=function(e,t){return"webgl"===e&&Object.assign(t,{preserveDrawingBuffer:!0,powerPreference:"high-performance",desynchronized:!0,alpha:!1,antialias:!1}),getContext(e,t)};const mainElement=document.getElementById("main"),displayElement=document.getElementById("display"),gameLoadingElement=document.getElementById("game-loading"),notificationBoxContainerElement=document.querySelector("#notification-box .container"),statusElement=document.getElementById("status"),spinnerElement=document.getElementById("spinner"),overlayElement=document.getElementById("overlay"),keymapsElement=document.getElementById("keymaps"),fpsWrapper=document.getElementById("fpsWrapper"),pauseMenu=document.getElementById("pauseMenu"),pauseMenuButton=document.getElementById("pauseMenuButton"),closePauseMenuButton=document.getElementById("closePauseMenuButton"),virtualGamepadElement=document.getElementById("virtualGamepad");let cpuprofilerElement=!1;const fpsMeter=new FPSMeter(fpsWrapper,{theme:"dark",position:"relative",left:"0",top:"0",interval:1e3,decimals:0,heat:1,graph:1,history:10}),select=document.getElementById("game-selector"),startButton=document.getElementById("start"),fullscreenButton=document.getElementById("fullscreen"),pauseButton=document.getElementById("pause"),saveStateButton=document.getElementById("save-state"),loadStateButton=document.getElementById("load-state"),settingsButton=document.getElementById("settings"),showProfilerButton=document.getElementById("show-profiler"),toggleKeymapButton=document.getElementById("toggle-keymap"),settingsAreaElement=document.getElementById("settingsArea"),gameFiles=document.getElementById("game-files"),settings={touchArea:"full",specialLayout:"md6Buttons"},vGamepad={displayButtons:{},buttonElements:{},touchInfos:{},port:null,onTouchStart:e=>{e.preventDefault();for(let t=0;t<e.changedTouches.length;t++){const n=e.changedTouches[t],o=vGamepad.getButtonId(n);o.forEach(e=>{Module.setButton(vGamepad.port,e,1),vGamepad.buttonElements[e].classList.add("pressed")}),vGamepad.touchInfos[n.identifier]={buttonIds:o}}},onTouchMove:e=>{for(let t=0;t<e.changedTouches.length;t++){const n=e.changedTouches[t],o=vGamepad.touchInfos[n.identifier];if(!o)continue;let a=vGamepad.getButtonId(n);const s=o.buttonIds,l=a.filter(e=>!s.includes(e)),r=s.filter(e=>!a.includes(e));(l.length>0||r.length>0)&&(r.forEach(e=>{Module.setButton(vGamepad.port,e,0),vGamepad.buttonElements[e].classList.remove("pressed")}),l.forEach(e=>{Module.setButton(vGamepad.port,e,1),vGamepad.buttonElements[e].classList.add("pressed")}),o.buttonIds=a)}},onTouchEnd:e=>{for(let t=0;t<e.changedTouches.length;t++){const n=e.changedTouches[t];if(!vGamepad.touchInfos[n.identifier])continue;vGamepad.getButtonId(n).forEach(e=>{Module.setButton(vGamepad.port,e,0),vGamepad.buttonElements[e].classList.remove("pressed")})}},getButtonId:e=>{let t=[];const n=e.target.getBoundingClientRect(),o=100*(e.clientX-n.left)/n.width,a=100*(e.clientY-n.top)/n.height,s=device.isLandscape?2.666:1.333,l=device.isLandscape?2.5:5;if("narrow"===settings.touchArea)for(const[e,n]of Object.entries(vGamepad.displayButtons)){const r=n.x-o,i=(n.y-a)/s;Math.sqrt(r*r+i*i)<=l&&t.push(e)}else if("wide"===settings.touchArea)for(const[e,n]of Object.entries(vGamepad.displayButtons)){const r=n.x-o,i=(n.y-a)/s;Math.sqrt(r*r+i*i)<=2.5*l&&t.push(e)}else if("full"===settings.touchArea){let e=!1,n=0;const r=o-(vGamepad.displayButtons.Left.x+vGamepad.displayButtons.Right.x)/2,i=(a-(vGamepad.displayButtons.Up.y+vGamepad.displayButtons.Down.y)/2)/s,c=Math.sqrt(r*r+i*i);if(n=Math.atan2(i,r),e=c<5*l,e)t=vGamepad.angleToDirections(n);else{let e=100,n="";for(const[t,l]of Object.entries(vGamepad.displayButtons)){const r=l.x-o,i=(l.y-a)/s,c=Math.sqrt(r*r+i*i);c<e&&(e=c,n=t)}t=[n]}}return t},angleToDirections:e=>{const t=Math.PI;return e<t/6&&e>-t/6?["Right"]:e>=t/6&&e<2*t/6?["Right","Down"]:e>=2*t/6&&e<4*t/6?["Down"]:e>=4*t/6&&e<5*t/6?["Left","Down"]:e<=-t/6&&e>-2*t/6?["Right","Up"]:e<=-2*t/6&&e>-4*t/6?["Up"]:e<=-4*t/6&&e>-5*t/6?["Left","Up"]:["Left"]}},device={isMobile:!1,isLandscape:!1,check:function(){var e;this.isLandscape=window.matchMedia("(orientation: landscape)").matches,this.isMobile=!1,e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(device.isMobile=!0)}};device.check(),device.isMobile&&(document.addEventListener("gesturestart",e=>e.preventDefault()),document.body.classList.add("mobile"),virtualGamepadElement.addEventListener("touchstart",vGamepad.onTouchStart),virtualGamepadElement.addEventListener("touchmove",vGamepad.onTouchMove),virtualGamepadElement.addEventListener("touchend",vGamepad.onTouchEnd));const devtools={enabled:!1,check:function(){const{outerHeight:e,innerHeight:t,outerWidth:n,innerWidth:o}=window;e-t>400||n-o>100?(this.enabled||console.log("Devtools enabled"),this.enabled=!0):(this.enabled&&console.log("Devtools disabled"),this.enabled=!1)}};function configureEmulatorCore(e,t){const[n,...o]=e.split("-"),a=o.join("-");switch(n){case"sfc":switch(a){case"lockstep":return Module.configure("cpu/lockstep",t),Module.configure("smp/lockstep",t),!0;case"fastmath":return Module.configure("cpu/fastmath",t),!0;case"cpu-overclock":return Module.configure("cpu/overclock",parseFloat(t)),!0;case"dsp-overclock":return Module.configure("dsp/overclock",parseFloat(t)),!0;case"ppu-overclock":return Module.configure("ppu/overclock",parseFloat(t)),!0;case"dsp":return Module.configure("dsp/enabled",t),!0;case"skipframe":return Module.configure("ppu/skipframe",t),!0}return!1;case"fc":switch(a){case"mic":return virtualGamepad.querySelectorAll('[data-console="Famicom"]').forEach(e=>{e.querySelector(".button_Microphone").style.display=t?"block":"none"}),!0;case"overclock":return Module.configure("cpu/overclock",parseFloat(t)),!0;case"synconce":return Module.configure("cpu/synconce",t),!0;case"overscan":return Module.configure("ppu/overscan",t),!0;case"skipframe":return Module.configure("ppu/skipframe",t),!0}case"md":switch(a){case"cpu-overclock":return Module.configure("cpu/overclock",parseFloat(t)),!0;case"apu-overclock":return Module.configure("apu/overclock",parseFloat(t)),!0;case"vdp-overclock":return Module.configure("vdp/overclock",parseFloat(t)),!0;case"skipframe":return Module.configure("vdp/skipframe",t),!0}return!1}}let db;async function openApplicationDatabase(){return new Promise((e,t)=>{const n=indexedDB.open("application",2);n.onerror=({target:{errorCode:e}})=>t(e),n.onupgradeneeded=({target:{result:e}})=>{e.objectStoreNames.contains("roms")||e.createObjectStore("roms",{keyPath:"filename"}),e.objectStoreNames.contains("saves")||e.createObjectStore("saves",{keyPath:"filename"}),e.objectStoreNames.contains("states")||e.createObjectStore("states",{keyPath:"id"})},n.onsuccess=({target:{result:t}})=>{db=t,e()}})}async function addGame(e,t){const n=Module.getROMInfo(e,t);if(!n)throw new Error("ROM is invalid");const{emulator:o,rom:[{children:a}]}=n;function s(e){const t=a.find(({name:t})=>t===e);return t?t.value:""}const l={filename:e,name:s("name"),label:s("label"),title:s("title"),emulator:o.name,romData:t};return selectEmulator(e),new Promise((e,t)=>{const n=db.transaction(["roms"],"readwrite");n.onerror=t,n.objectStore("roms").add(l).onsuccess=()=>e(l)})}async function getGame(e){return new Promise((t,n)=>{const o=db.transaction(["roms"],"readonly");o.onerror=n;const a=o.objectStore("roms").get(e);a.onsuccess=()=>t(a.result)})}async function listGames(){return new Promise((e,t)=>{const n=db.transaction(["roms"],"readonly");n.onerror=t;const o=n.objectStore("roms").getAll();o.onsuccess=()=>e(o.result)})}async function storeState(e,t,n){return new Promise((o,a)=>{const s=db.transaction(["states"],"readwrite");s.onerror=a,s.objectStore("states").put({id:`${e}:${t}`,state:n}).onsuccess=()=>o()})}async function getState(e,t){return new Promise((n,o)=>{const a=db.transaction(["states"],"readonly");a.onerror=o;const s=a.objectStore("states").get(`${e}:${t}`);s.onsuccess=()=>n(s.result&&s.result.state)})}async function storeSave(e,t){return new Promise((n,o)=>{const a=db.transaction(["saves"],"readwrite");a.onerror=o,a.objectStore("saves").put({filename:e,data:t}).onsuccess=()=>n()})}async function getSave(e){return new Promise((t,n)=>{const o=db.transaction(["saves"],"readonly");o.onerror=n;const a=o.objectStore("saves").get(e);a.onsuccess=()=>t(a.result&&a.result.data)})}devtools.check(),window.addEventListener("resize",()=>{device.check(),devtools.check(),device.isMobile?document.body.classList.add("mobile"):document.body.classList.remove("mobile"),resizeVideo()}),window.addEventListener("orientationchange",resizeVideo),document.forms.settingsForm.addEventListener("change",({target:{name:e,value:t,checked:n}})=>{switch(e){case"gamepadOpacity":virtualGamepadElement.style.opacity=t;break;case"gamepadColored":"on"===t?virtualGamepadElement.classList.add("colored"):virtualGamepadElement.classList.remove("colored");break;case"gamepadPosition":"high"===t?virtualGamepadElement.classList.add("position_high"):virtualGamepadElement.classList.remove("position_high");break;case"specialLayout":settings.specialLayout=t,"md3Buttons"===t?virtualGamepadElement.classList.add("md3Buttons"):virtualGamepadElement.classList.remove("md3Buttons"),displayControllerForEmulator();break;case"touchArea":settings.touchArea=t;break;case"volume":Module.setVolume(parseInt(t,10));break;case"mute":case"dsp":Module.setMute(n);break;case"fps":document.getElementById("fpsWrapper").style.display=n?"block":"none";break;default:configureEmulatorCore(e,void 0!==n?n:t)||console.log("received unknown settings change event:",e,t)}});var Module={info:{isRunning:!1,currentGame:null,currentEmulator:null},onRuntimeInitialized:async()=>{try{await openApplicationDatabase()}catch(e){return console.error(e),void Module.setStatus("Failed to open database, see JavaScript console")}pauseMenuButton.addEventListener("click",togglePauseMenu),closePauseMenuButton.addEventListener("click",togglePauseMenu),Module.initialize(document.title),Module.onFrameStart(()=>{pollGamepadControllers(),fpsMeter.tickStart()}),Module.onFrameEnd(()=>fpsMeter.tick()),Module.onResize(resizeVideo),configureCPUProfiler(),canvas.addEventListener("webglcontextlost",(function(e){Module.setStatus("WebGL context lost. You will need to reload the page."),e.preventDefault()}),!1),populateSelectGameList(),gameFiles.addEventListener("change",({target:{files:e}})=>addROMFiles(e)),select.addEventListener("change",()=>selectEmulator(select.value)),startButton.addEventListener("click",()=>startGame(select.value)),pauseButton.addEventListener("click",()=>pauseOrResumeGame()),saveStateButton.addEventListener("click",()=>stateSave(Module.info.currentGame,1)),loadStateButton.addEventListener("click",()=>stateLoad(Module.info.currentGame,1)),window.addEventListener("beforeunload",async()=>{Module.info.isRunning&&await gameSave(Module.info.currentGame)}),document.body.requestFullscreen?(fullscreenButton.addEventListener("click",()=>toggleFullscreen()),document.addEventListener("fullscreenchange",()=>adjustScreenDisplay())):fullscreenButton.parentElement.removeChild(fullscreenButton),device.isMobile?toggleKeymapButton.parentElement.removeChild(toggleKeymapButton):toggleKeymapButton.addEventListener("click",()=>toggleKeymap()),showProfilerButton.addEventListener("click",()=>cpuprofilerElement.classList.toggle("show")),settingsButton.addEventListener("click",()=>settingsAreaElement.classList.toggle("show")),hideOverlay()},preRun:[],postRun:[],printErr:(...e)=>console.error(...e),canvas:canvas,totalDependencies:0,monitorRunDependencies:function(e){Module.setStatus("Preparing")},setStatus:function(e){e&&"Running..."!==e&&(showOverlay(),statusElement.innerHTML=e)}};let wasPaused;function configureCPUProfiler(){const e=document.querySelector("body > div:last-child");e&&"Cpu Profiler"===e.innerText.substring(0,12)?(cpuprofilerElement=e,cpuprofilerElement.id="cpuprofiler",cpuprofilerElement.addEventListener("touchstart",()=>cpuprofilerElement.classList.toggle("show")),displayElement.appendChild(cpuprofilerElement)):showProfilerButton.style.display="none"}async function addROMFiles(e){let t=0;for(const n of e)""!==Module.getEmulatorForFilename(n.name.toLowerCase())?(await new Promise(t=>{const o=new FileReader;o.onload=async()=>{const{name:a,title:s,emulator:l}=await addGame(n.name,o.result);addGameToSelectList(s||a,n.name),1===e.length&&notify(`\n                  <h1>🎮Game added</h1>\n                  <p>\n                    ${s||a} (file ${n.name}) for <strong>${l}</strong> \n                    was successfully added to your list of games\n                  </p>\n                `,"success",5e3),t()},o.readAsArrayBuffer(n)}),t+=1):notify(`\n              <h1>💀Invalid ROM file</h1>\n              <p>\n                ${n.name} is not a supported ROM file\n              </p>\n            `,"danger",5e3);e.length>1&&notify(`\n            <h1>🎮Games added</h1>\n            <p>\n              <strong>${t} ROMs</strong> were added to your collection\n            </p>\n          `,"success",5e3)}function addGameToSelectList(e,t){const n=document.createElement("option");n.innerHTML=`${e} (${t})`,n.value=t,select.appendChild(n),select.value=t}async function populateSelectGameList(){const e=await listGames();if(0===e.length)return notify("\n            <h1>👋First time around?</h1>\n            <p>\n              Click <strong>Add ROMs</strong> to get started\n            </p>\n          ","success",5e3);e.forEach(({title:e,name:t,filename:n})=>addGameToSelectList(e||t,n));const t=localStorage.getItem(LAST_GAME);t&&(select.value=t,selectEmulator(select.value))}function adjustScreenDisplay(){document.fullscreenElement?(device.isMobile||document.body.classList.add("fullscreen"),fullscreenButton.textContent="Restore"):(device.isMobile||document.body.classList.remove("fullscreen"),fullscreenButton.textContent="Fullscreen")}function toggleFullscreen(){document.fullscreenElement?exitFullScreen():requestFullscreen()}function exitFullScreen(){document.exitFullscreen()}function requestFullscreen(){document.body.requestFullscreen()}function displayControllerForEmulator(){virtualGamepadElement.style.display="block";const e=document.querySelectorAll("#virtualGamepad .console");for(const t of e){const{console:e,orientation:n,port:o,type:a,layout:s}=t.dataset,l=device.isLandscape?"landscape":"portrait";let r=e==Module.info.currentEmulator&&n===l;if("Mega Drive"===Module.info.currentEmulator&&s!==settings.specialLayout&&(r=!1),r){t.classList.add("show"),Module.connectPeripheral(o,a),vGamepad.port=o,vGamepad.displayButtons={},vGamepad.buttonElements={},Array.from(t.children).forEach(e=>{const{label:t,x:n,y:o}=e.dataset;vGamepad.displayButtons[t]={x:parseInt(n,10),y:parseInt(o,10)},vGamepad.buttonElements[t]=e})}else t.classList.remove("show")}}function setKeymap(e){this.onKeydown&&window.removeEventListener("keydown",this.onKeydown),this.onKeyup&&window.removeEventListener("keydown",this.onKeyup);const{port:t,type:n}=e.dataset,o={};e.querySelectorAll(".keymap").forEach(e=>{const t=e.querySelector(".button").textContent;let n=e.querySelector(".key").textContent;1===n.length&&(n=n.toLowerCase()),o[n]=t}),Module.connectPeripheral(t,n),this.onKeydown=({key:e})=>o[e]&&Module.setButton(t,o[e],1),this.onKeyup=({key:e})=>o[e]&&Module.setButton(t,o[e],0),window.addEventListener("keydown",this.onKeydown),window.addEventListener("keyup",this.onKeyup)}function setKeymapForEmulator(e){const t=document.querySelectorAll("#keymaps > div");for(const n of t){const{console:t}=n.dataset,o=t==e;n.style.display="none",o&&(setKeymap(n),n.style.display="flex")}}function toggleKeymap(){"Show keymap"===toggleKeymapButton.textContent?(keymapsElement.style.display="block",toggleKeymapButton.textContent="Hide keymap"):(keymapsElement.style.display="none",toggleKeymapButton.textContent="Show keymap")}window.addEventListener("focus",()=>{devtools.enabled||!Module.info.isRunning||wasPaused||setResume()}),window.addEventListener("blur",()=>{!devtools.enabled&&Module.info.isRunning&&(wasPaused="Resume"===pauseButton.textContent,wasPaused||setPause())}),window.onerror=function(){Module.setStatus("Exception thrown, see JavaScript console"),spinnerElement.style.display="none"};const gamepadControllers={"Controller Port 1":null,"Controller Port 2":null,"Controller Port 3":null,"Controller Port 4":null},gamepadButtonKeymaps={"Xbox 360 Controller (XInput STANDARD GAMEPAD)":{Famicom:["A","B","X","Y","L","R","L","R","Select","Start",null,null,"Up","Down","Left","Right"],"Super Famicom":["A","B","X","Y","L","R","L","R","Select","Start",null,null,"Up","Down","Left","Right"],"Mega Drive":["A","B","X","Y","C","Z","C","Z","Select","Start",null,null,"Up","Down","Left","Right"]},xinput:{Famicom:["A","B","X","Y","L","R","L","R","Select","Start",null,null,"Up","Down","Left","Right"],"Super Famicom":["A","B","X","Y","L","R","L","R","Select","Start",null,null,"Up","Down","Left","Right"],"Mega Drive":["A","B","X","Y","C","Z","C","Z","Select","Start",null,null,"Up","Down","Left","Right"]},"Wireless Controller (STANDARD GAMEPAD Vendor: 054c Product: 05c4)":{Famicom:["A","B","X","Y","L","R","L","R","Select","Start",null,null,"Up","Down","Left","Right"],"Super Famicom":["A","B","X","Y","L","R","L","R","Select","Start",null,null,"Up","Down","Left","Right"],"Mega Drive":["A","B","X","Y","C","Z","C","Z","Select","Start",null,null,"Up","Down","Left","Right"]},"DUALSHOCK 4 Wireless Controller Extended Gamepad":{Famicom:["A","B","X","Y","L","R","L","R","Select","Start",null,null,"Up","Down","Left","Right"],"Super Famicom":["A","B","X","Y","L","R","L","R","Select","Start",null,null,"Up","Down","Left","Right"],"Mega Drive":["A","B","X","Y","C","Z","C","Z","Select","Start",null,null,"Up","Down","Left","Right"]},"Pro Controller (STANDARD GAMEPAD Vendor: 057e Product: 2009)":{Famicom:["A","B","X","Y","L","R","L","R","Select","Start",null,null,"Up","Down","Left","Right","Select","Start"],"Super Famicom":["A","B","X","Y","L","R","L","R","Select","Start",null,null,"Up","Down","Left","Right","Select","Start"],"Mega Drive":["A","B","X","Y","C","Z","C","Z","Select","Start",null,null,"Up","Down","Left","Right","Select","Start"]}};function getVirtualControllerNameForEmulator(){return document.querySelector(`#keymaps > div[data-console="${Module.info.currentEmulator}"]`).getAttribute("data-type")}function connectGamepad(e){if(!gamepadButtonKeymaps[e.id])return notify(`\n              <h1>😲 Cannot connect gamepad</h1>\n              <p>\n                Gamepad detected but no button mappings are available for <strong>${e.id}</strong>\n              </p>\n            `,"warning");for(const[t,n]of Object.entries(gamepadControllers))if(null===n)return gamepadControllers[t]=e.index,Module.disconnectPeripheral(t),Module.connectPeripheral(t,getVirtualControllerNameForEmulator()),notify(`\n              <h1>🔗 Gamepad connected</h1>\n              <p>\n                <strong>${e.id}</strong> is connected to <strong>${t}</strong>\n              </p>\n            `,"success")}function disconnectGamepad(e){for(const[t,n]of Object.entries(gamepadControllers))if(e.index===n)return"Controller Port 1"!==t&&Module.disconnectPeripheral(t),gamepadControllers[t]=null,notify(`\n              <h1>💨 Gamepad disconnected</h1>\n              <p>\n                <strong>${e.id}</strong> is disconnected from <strong>${t}</strong>\n              </p>\n            `,"danger")}function connectAllGamepadPeripherals(){for(const[e,t]of Object.entries(gamepadControllers))t&&"Controller Port 1"!==e&&(Module.disconnectPeripheral(e),Module.connectPeripheral(e,getVirtualControllerNameForEmulator()))}function pollGamepads(){return navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():[]}function pollGamepadControllers(){const e=pollGamepads();for(const[t,n]of Object.entries(gamepadControllers)){if(null===n)continue;const{id:o,buttons:a}=e[n],s=gamepadButtonKeymaps[o][Module.info.currentEmulator];for(const[e,n]of a.entries())s[e]&&Module.setButton(t,s[e],n.value)}}async function selectEmulator(e){if(Module.info.isRunning&&(await gameSave(Module.info.currentGame),Module.info.isRunning=!1,Module.info.currentGame=null,Module.unload()),!Module.setEmulatorForFilename(e))throw new Error(`No matching emulator for ${select.value}`);const t=Module.getEmulatorForFilename(e);console.log("Selected emulator:",t),document.querySelectorAll("#core-specific-settings > div").forEach(e=>{const{dataset:n,style:o}=e;n.console===t?(o.display="flex",e.querySelectorAll("input").forEach(({id:e,value:t,checked:n})=>configureEmulatorCore(e,void 0!==n?n:t))):o.display="none"}),Module.info.currentEmulator=t,localStorage.setItem(LAST_GAME,select.value)}async function startGame(e){gameLoadingElement.style.display="block";const{romData:t,emulator:n}=await getGame(e),o=await gameLoad(e);Module.load(t,o),device.isMobile?displayControllerForEmulator():setKeymapForEmulator(n),connectAllGamepadPeripherals(),gameLoadingElement.style.display="none",Module.info.isRunning=!0,Module.info.currentGame=e,setTimeout(()=>{setResume(),device.isMobile&&togglePauseMenu()},100)}function stateSave(e,t){if(!Module.info.isRunning)return notify("\n            <h1>💣No games running</h1>\n            <p>\n              You need to <strong>start a game</strong> before you can save a state\n            </p>\n          ","danger",5e3);Module.stateSave(async n=>{const o=n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);await storeState(e,t,o),device.isMobile&&togglePauseMenu()})}async function stateLoad(e,t){if(!Module.info.isRunning)return notify("\n            <h1>💣No games running</h1>\n            <p>\n              You need to <strong>start a game</strong> before you can load a state\n            </p>\n          ","danger",5e3);const n=await getState(e,t);if(!n)return notify("\n              <h1>💣No states found</h1>\n              <p>\n                You need to <strong>Save state</strong> before you can load a state\n              </p>\n            ","danger",5e3);Module.stateLoad(n),device.isMobile&&togglePauseMenu()}async function gameSave(e){const t=Module.save();for(const[e,{buffer:n,byteOffset:o,byteLength:a}]of Object.entries(t))t[e]=n.slice(o,o+a);await storeSave(e,t)}async function gameLoad(e){return getSave(e)}function setPause(){fpsMeter.pause(),Module.stop(),document.body.classList.add("paused"),pauseButton.textContent="Resume"}function setResume(){document.body.classList.remove("paused"),fpsMeter.resume(),Module.start(),pauseButton.textContent="Pause"}function pauseOrResumeGame(){Module.info.isRunning&&("Pause"===pauseButton.textContent?setPause():setResume())}function notify(e,t,n){n=n||5e3,t=t||"warning";const o=document.createElement("div");o.classList.add("alert"),o.classList.add(`alert-${t}`),o.dataset.role="alert",o.innerHTML=e,notificationBoxContainerElement.appendChild(o),setTimeout(()=>o.classList.add("show"),10),setTimeout(()=>{o.classList.remove("show"),setTimeout(()=>notificationBoxContainerElement.removeChild(o),250)},n)}function showOverlay(){overlayElement.style.display="flex",setTimeout(()=>overlayElement.style.opacity=1,0)}function hideOverlay(){overlayElement.style.opacity=0,setTimeout(()=>overlayElement.style.display="none",250)}function togglePauseMenu(){"none"===pauseMenu.style.display?(pauseMenu.style.display="block",pauseMenuButton.style.display="none"):(pauseMenu.style.display="none",pauseMenuButton.style.display="block",settingsAreaElement.classList.remove("show"))}function resizeVideo(){device.isMobile?(document.body.style.height=window.innerHeight+"px",vGamepad.displayButtons&&null!==Module.info.currentEmulator&&displayControllerForEmulator()):document.body.style.height="auto"}window.addEventListener("gamepadconnected",({gamepad:e})=>connectGamepad(e),!1),window.addEventListener("gamepaddisconnected",({gamepad:e})=>disconnectGamepad(e),!1)</script><script src=byuu-web.js async></script></body></html>