<!doctypehtml><html lang=en-us><head><meta charset=utf-8><meta content="text/html; charset=utf-8"http-equiv=Content-Type><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,shrink-to-fit=no"name=viewport><meta content=yes name=apple-mobile-web-app-capable><meta content=black-translucent name=apple-mobile-web-app-status-bar-style><title>byuu \\ web</title><link href=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css rel=stylesheet crossorigin=anonymous integrity=sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm><script src=https://code.jquery.com/jquery-3.2.1.slim.min.js crossorigin=anonymous integrity=sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN></script><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js crossorigin=anonymous integrity=sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q></script><script src=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js crossorigin=anonymous integrity=sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl></script><script src=https://unpkg.com/fpsmeter@0.3.1/dist/fpsmeter.min.js crossorigin=anonymous></script><link href="https://fonts.googleapis.com/css2?family=Muli:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Press+Start+2P&display=swap"rel=stylesheet><style>*{touch-action:none!important}.btn:active,.btn:focus{outline:0;box-shadow:none}.btn{font-style:normal}body{position:absolute;display:flex;flex-wrap:wrap;align-items:center;justify-content:center;top:0;bottom:0;left:0;right:0;padding:0;margin:0;background:#070708;font-family:Muli,sans-serif}body.mobile{display:block}#main{width:100%;max-width:1600px}@media (max-width:1600px){#main{width:100%;max-width:800px}}@media (max-width:1200px){#main{width:100%;max-width:600px}}#actions{width:100%}.fullscreen #actions{position:absolute;display:block;bottom:0;left:0;opacity:0;transition:opacity ease-out 125ms;transition-delay:3s;z-index:999}.fullscreen #actions:hover{opacity:1;transition:opacity ease-in 250ms}#game-selector-container{width:100%}#game-selector-container .arrow{position:absolute;display:block;pointer-events:none;padding:8px 6px;font-size:20px;text-shadow:-1px 1px 0 #000}#game-selector:empty{display:none}#game-selector{width:100%;padding:10px 10px 10px 30px;border-top:2px solid #000;border-bottom:2px solid #000;border-left:0 none;border-right:0 none;border-radius:0;background:#343434;-webkit-appearance:none;font-family:'Press Start 2P',cursive;color:#f7f8ee}#actions .btn-group{display:flex}#actions .btn-group .btn{flex:1;border-radius:0;margin-left:1px;margin-bottom:1px}#actions .btn-group .btn:first-child{margin-left:0}#game-files{display:none}#cpuprofiler{position:absolute;display:none;width:100%;top:0;opacity:.8;z-index:999}#cpuprofiler.show{display:block}#cpuprofiler canvas{width:95%}#display{position:relative;display:block;height:100%;margin:0 auto}.fullscreen #display{position:absolute;display:block;top:0;bottom:0;left:0;right:0}#display #canvas{display:block;height:calc(100% - 30px);width:100%;margin:0 auto;background-color:#070708;transition:opacity ease-out 125ms,filter ease-out 125ms}.paused #canvas{opacity:.5;filter:blur(3px) saturate(.5);transition:opacity ease-in 125ms,filter ease-in 125ms}.fullscreen #display #canvas{width:unset}#game-loading{position:absolute;z-index:2;display:none;width:300px;height:45px;top:calc(50% - 16px);left:calc(50% - 150px);font-size:32px;font-family:'Press Start 2P',cursive;color:#f7f8ee;text-align:center;background-color:rgba(0,0,0,.75)}#notification-box{z-index:3;overflow:hidden;position:absolute;display:flex;flex-wrap:wrap;align-items:center;justify-content:center;top:30px;bottom:30px;left:30px;right:30px;pointer-events:none}#notification-box .container{flex-wrap:wrap;align-items:center;justify-content:center}.fullscreen #notification-box .container{transform:scale(2)}#notification-box .container .alert{opacity:0;transform:scale(0);transition:opacity cubic-bezier(.165,.84,.44,1) 250ms,transform cubic-bezier(.165,.84,.44,1) 250ms;background-color:rgba(255,255,255,.8);border-width:5px;border-radius:10px;overflow-wrap:break-word;filter:brightness(1.5) saturate(1.5);box-shadow:0 0 10px #070708}#notification-box .container .alert h1{-webkit-font-smoothing:subpixel-antialiased;-webkit-text-stroke:.5px;font-size:1.8em}#notification-box .container .alert p{color:#000;font-size:1.2em;-webkit-text-stroke:.25px;-webkit-font-smoothing:subpixel-antialiased;text-shadow:0 0 5px rgba(0,0,0,.5);margin-bottom:5px}#notification-box .container .alert.show{opacity:1;transform:scale(1)}#keymaps{position:absolute;display:none;top:calc(50% - 150px);left:0;width:100%}#keymaps>div{position:relative;display:none;flex-wrap:wrap;max-width:700px;border:3px solid #e94f37;border-radius:10px;padding:20px 10px 10px;margin:0 auto;background:rgba(16,17,18,.75)}.fullscreen #keymaps>div{transform:scale(2)}.keymap{display:block;margin:0 20px 10px}.keymap .button{display:inline-block;background:#393e41;color:#f7f8ee;padding:5px 10px;text-align:center;border-radius:5px}.keymap .key{display:inline-block;color:#f7f8ee;margin-left:10px}#controllers{display:none}.mobile #controllers{position:absolute;display:block;overflow:hidden;bottom:0;left:0;height:230px;width:100%;transition:opacity ease-in 250ms,bottom ease-in 125ms;z-index:100}.paused #controllers{opacity:.4;bottom:-75px;transition:opacity ease-out 125ms,bottom ease-out 125ms}#controllers>div{position:absolute;display:block;opacity:0;bottom:-200px;width:100%;height:200px;background:linear-gradient(27deg,#151515 5px,transparent 5px) 0 5px,linear-gradient(207deg,#151515 5px,transparent 5px) 10px 0,linear-gradient(27deg,#222 5px,transparent 5px) 0 10px,linear-gradient(207deg,#222 5px,transparent 5px) 10px 5px,linear-gradient(90deg,#1b1b1b 10px,transparent 10px),linear-gradient(#1d1d1d 25%,#1a1a1a 25%,#1a1a1a 50%,transparent 50%,transparent 75%,#242424 75%,#242424);background-color:#131313;background-size:20px 20px;border-top:5px solid #e94f37;box-shadow:-5px 0 10px #070708;transition:opacity ease-in 250ms,bottom ease-in 250ms}#controllers .btn{position:absolute;display:block;box-shadow:2px 2px 1px #070708;text-shadow:0 1px 0 rgba(255,255,255,.3),0 -1px 1px rgba(0,0,0,.7);font-family:'Press Start 2P',cursive;color:#f7f8ee}#overlay{background:#f7f8ee;opacity:1;z-index:999;position:fixed;display:flex;flex-wrap:wrap;align-items:center;justify-content:center;top:0;bottom:0;left:0;right:0;transition:opacity ease-out 250ms}figure{overflow:hidden;height:150px;width:200px;padding:5px;margin:0 auto}#status{color:#393e41;margin:0 auto;display:block;width:100%;text-align:center;font-size:3em;font-weight:700}.spinner{background-color:#f7f8ee;position:relative;border-radius:50%;display:inline-block;height:300px;width:200px;box-sizing:border-box;text-align:center;padding:20px}.spinner:before{border-radius:50%;content:"";clip-path:inset(0 0 0 0);animation:spin 1s linear infinite;width:200px;height:200px;top:-5px;left:-5px;position:absolute;z-index:-1;padding:5px}@keyframes spin{0%{background-image:linear-gradient(to bottom,#e94f37 0,#00d4ff 100%);transform:rotate(0)}100%{background-image:linear-gradient(to bottom,#e94f37 0,#00d4ff 100%);transform:rotate(360deg)}}</style></head><body><div id=overlay><div class=container><figure id=spinner><div class=spinner></div></figure><div id=status>Downloading</div></div></div><div id=main><div id=display><canvas id=canvas oncontextmenu=event.preventDefault() tabindex=-1 width=100%></canvas><div id=game-loading>Loading</div><div id=notification-box><div class=container></div></div></div><div id=actions><div id=game-selector-container><div class=arrow>▼︎</div><select id=game-selector></select></div><div class=btn-group aria-label=Options role=group><button class="btn btn-secondary"type=button id=start>Start</button><button class="btn btn-secondary"type=button id=pause>Pause</button><button class="btn btn-secondary"type=button id=fullscreen>Fullscreen</button><label class="btn btn-secondary"id=add><input id=game-files multiple name=files[] type=file><span>Add ROMS</span></label></div><div class=btn-group aria-label=Options role=group><button class="btn btn-secondary"type=button id=save-state>Save state</button><button class="btn btn-secondary"type=button id=load-state>Load state</button><button class="btn btn-secondary"type=button id=toggle-keymap>Show keymap</button><button class="btn btn-secondary"type=button id=show-profiler>Profiler</button></div></div><div id=keymaps><div data-console=Famicom data-port="Controller Port 1"data-type=Gamepad><div class=keymap><span class=button>Up</span><span class=key>W</span></div><div class=keymap><span class=button>Left</span><span class=key>A</span></div><div class=keymap><span class=button>Down</span><span class=key>S</span></div><div class=keymap><span class=button>Right</span><span class=key>D</span></div><div class=keymap><span class=button>A</span><span class=key>K</span></div><div class=keymap><span class=button>B</span><span class=key>L</span></div><div class=keymap><span class=button>Select</span><span class=key>Backspace</span></div><div class=keymap><span class=button>Start</span><span class=key>Enter</span></div></div><div data-console="Super Famicom"data-port="Controller Port 1"data-type=Gamepad><div class=keymap><span class=button>Up</span><span class=key>W</span></div><div class=keymap><span class=button>Left</span><span class=key>A</span></div><div class=keymap><span class=button>Down</span><span class=key>S</span></div><div class=keymap><span class=button>Right</span><span class=key>D</span></div><div class=keymap><span class=button>L</span><span class=key>9</span></div><div class=keymap><span class=button>R</span><span class=key>0</span></div><div class=keymap><span class=button>X</span><span class=key>O</span></div><div class=keymap><span class=button>Y</span><span class=key>P</span></div><div class=keymap><span class=button>A</span><span class=key>K</span></div><div class=keymap><span class=button>B</span><span class=key>L</span></div><div class=keymap><span class=button>Select</span><span class=key>Backspace</span></div><div class=keymap><span class=button>Start</span><span class=key>Enter</span></div></div></div></div><div id=controllers><div data-console=Famicom data-port="Controller Port 1"data-type=Gamepad><button class="btn btn-secondary"type=button style=bottom:130px;left:50px;height:50px;width:70px value=Up>▲︎</button><button class="btn btn-secondary"type=button style=bottom:20px;left:50px;height:50px;width:70px value=Down>▼︎</button><button class="btn btn-secondary"type=button style=left:10px;bottom:80px;width:70px;height:40px value=Left>◀︎</button><button class="btn btn-secondary"type=button style=left:90px;bottom:80px;width:70px;height:40px value=Right>▶︎</button><button class="btn btn-danger"type=button style=height:70px;width:70px;bottom:90px;right:100px value=A>A</button><button class="btn btn-danger"type=button style=height:70px;width:70px;bottom:90px;right:20px value=B>B</button><button class="btn btn-secondary btn-sm"type=button style=width:70px;bottom:40px;right:100px;font-size:10px;padding:3px value=Select>Select</button><button class="btn btn-secondary btn-sm"type=button style=width:70px;bottom:40px;right:20px;font-size:10px;padding:3px value=Start>Start</button></div><div data-console="Super Famicom"data-port="Controller Port 1"data-type=Gamepad><button class="btn btn-secondary"type=button style=bottom:130px;left:50px;height:50px;width:70px value=Up>▲︎</button><button class="btn btn-secondary"type=button style=bottom:20px;left:50px;height:50px;width:70px value=Down>▼︎</button><button class="btn btn-secondary"type=button style=left:10px;bottom:80px;width:70px;height:40px value=Left>◀︎</button><button class="btn btn-secondary"type=button style=left:90px;bottom:80px;width:70px;height:40px value=Right>▶︎</button><button class="btn btn-primary"type=button style=height:65px;width:65px;border-radius:33px;bottom:110px;right:85px value=X>X</button><button class="btn btn-success"type=button style=height:65px;width:65px;border-radius:33px;bottom:120px;right:15px value=Y>Y</button><button class="btn btn-warning"type=button style=height:65px;width:65px;border-radius:33px;bottom:40px;right:85px value=B>B</button><button class="btn btn-danger"type=button style=height:65px;width:65px;border-radius:33px;bottom:50px;right:15px value=A>A</button><button class="btn btn-dark"type=button style=height:25px;width:150px;bottom:190px;left:10px;padding:0 value=L>L</button><button class="btn btn-dark"type=button style=height:25px;width:150px;bottom:190px;right:10px;padding:0 value=R>R</button><button class="btn btn-secondary btn-sm"type=button style=width:70px;bottom:10px;right:90px;font-size:10px;padding:3px value=Select>Select</button><button class="btn btn-secondary btn-sm"type=button style=width:70px;bottom:10px;right:10px;font-size:10px;padding:3px value=Start>Start</button></div></div><script>const LAST_GAME="last-game",canvas=document.getElementById("canvas"),mainElement=document.getElementById("main"),displayElement=document.getElementById("display"),gameLoadingElement=document.getElementById("game-loading"),notificationBoxContainerElement=document.querySelector("#notification-box .container"),statusElement=document.getElementById("status"),spinnerElement=document.getElementById("spinner"),overlayElement=document.getElementById("overlay"),keymapsElement=document.getElementById("keymaps");let cpuprofilerElement=!1;const fpsMeter=new FPSMeter(displayElement,{theme:"dark",position:"relative",left:"0",top:"0",interval:1e3,decimals:0,heat:1,graph:1,history:10}),select=document.getElementById("game-selector"),startButton=document.getElementById("start"),fullscreenButton=document.getElementById("fullscreen"),pauseButton=document.getElementById("pause"),saveStateButton=document.getElementById("save-state"),loadStateButton=document.getElementById("load-state"),showProfilerButton=document.getElementById("show-profiler"),toggleKeymapButton=document.getElementById("toggle-keymap"),gameFiles=document.getElementById("game-files"),device={isMobile:!1,check:function(){var e;this.isMobile=!1,e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(device.isMobile=!0)}};device.check(),device.isMobile&&(document.addEventListener("gesturestart",e=>e.preventDefault()),document.body.classList.add("mobile"));const devtools={enabled:!1,check:function(){const{outerHeight:e,innerHeight:t,outerWidth:n,innerWidth:o}=window;e-t>400||n-o>100?(this.enabled||console.log("Devtools enabled"),this.enabled=!0):(this.enabled&&console.log("Devtools disabled"),this.enabled=!1)}};let db;async function openApplicationDatabase(){return new Promise((e,t)=>{const n=indexedDB.open("application",2);n.onerror=({target:{errorCode:e}})=>t(e),n.onupgradeneeded=({target:{result:e}})=>{e.objectStoreNames.contains("roms")||e.createObjectStore("roms",{keyPath:"filename"}),e.objectStoreNames.contains("saves")||e.createObjectStore("saves",{keyPath:"filename"}),e.objectStoreNames.contains("states")||e.createObjectStore("states",{keyPath:"id"})},n.onsuccess=({target:{result:t}})=>{db=t,e()}})}async function addGame(e,t){const n=Module.getROMInfo(e,t);if(!n)throw new Error("ROM is invalid");const{emulator:o,rom:[{children:a}]}=n;function s(e){const t=a.find(({name:t})=>t===e);return t?t.value:""}const r={filename:e,name:s("name"),label:s("label"),title:s("title"),emulator:o.name,romData:t};return new Promise((e,t)=>{const n=db.transaction(["roms"],"readwrite");n.onerror=t,n.objectStore("roms").add(r).onsuccess=()=>e(r)})}async function getGame(e){return new Promise((t,n)=>{const o=db.transaction(["roms"],"readonly");o.onerror=n;const a=o.objectStore("roms").get(e);a.onsuccess=()=>t(a.result)})}async function listGames(){return new Promise((e,t)=>{const n=db.transaction(["roms"],"readonly");n.onerror=t;const o=n.objectStore("roms").getAll();o.onsuccess=()=>e(o.result)})}async function storeState(e,t,n){return new Promise((o,a)=>{const s=db.transaction(["states"],"readwrite");s.onerror=a,s.objectStore("states").put({id:`${e}:${t}`,state:n}).onsuccess=()=>o()})}async function getState(e,t){return new Promise((n,o)=>{const a=db.transaction(["states"],"readonly");a.onerror=o;const s=a.objectStore("states").get(`${e}:${t}`);s.onsuccess=()=>n(s.result&&s.result.state)})}async function storeSave(e,t){return new Promise((n,o)=>{const a=db.transaction(["saves"],"readwrite");a.onerror=o,a.objectStore("saves").put({filename:e,data:t}).onsuccess=()=>n()})}async function getSave(e){return new Promise((t,n)=>{const o=db.transaction(["saves"],"readonly");o.onerror=n;const a=o.objectStore("saves").get(e);a.onsuccess=()=>t(a.result&&a.result.data)})}devtools.check(),window.addEventListener("resize",()=>{device.check(),devtools.check()});var Module={info:{isRunning:!1,currentGame:null},onRuntimeInitialized:async()=>{try{await openApplicationDatabase()}catch(e){return console.error(e),void Module.setStatus("Failed to open database, see JavaScript console")}const{width:e,height:t}=getDesiredCanvasSize();Module.init(e,t),Module.onFrameStart(()=>{pollGamepadControllers(),fpsMeter.tickStart()}),Module.onFrameEnd(()=>fpsMeter.tick()),configureCPUProfiler(),canvas.addEventListener("webglcontextlost",(function(e){Module.setStatus("WebGL context lost. You will need to reload the page."),e.preventDefault()}),!1),populateSelectGameList(),gameFiles.addEventListener("change",({target:{files:e}})=>addROMFiles(e)),startButton.addEventListener("click",()=>startGame(select.value)),pauseButton.addEventListener("click",()=>pauseOrResumeGame()),saveStateButton.addEventListener("click",()=>stateSave(Module.info.currentGame,1)),loadStateButton.addEventListener("click",()=>stateLoad(Module.info.currentGame,1)),window.addEventListener("beforeunload",async()=>{Module.info.isRunning&&await gameSave(Module.info.currentGame)}),document.body.requestFullscreen?(fullscreenButton.addEventListener("click",()=>toggleFullscreen()),document.addEventListener("fullscreenchange",()=>adjustScreenDisplay())):fullscreenButton.parentElement.removeChild(fullscreenButton),device.isMobile?toggleKeymapButton.parentElement.removeChild(toggleKeymapButton):toggleKeymapButton.addEventListener("click",()=>toggleKeymap()),showProfilerButton.addEventListener("click",()=>cpuprofilerElement.classList.toggle("show")),hideOverlay()},preRun:[],postRun:[],printErr:(...e)=>console.error(...e),canvas:canvas,totalDependencies:0,monitorRunDependencies:function(e){Module.setStatus("Preparing")},setStatus:function(e){e&&"Running..."!==e&&(showOverlay(),statusElement.innerHTML=e)}};let wasPaused;function configureCPUProfiler(){const e=document.querySelector("body > div:last-child");e&&"Cpu Profiler"===e.innerText.substring(0,12)?(cpuprofilerElement=e,cpuprofilerElement.id="cpuprofiler",cpuprofilerElement.addEventListener("touchstart",()=>cpuprofilerElement.classList.toggle("show")),displayElement.appendChild(cpuprofilerElement)):showProfilerButton.style.display="none"}function getDesiredCanvasSize(){let e=1600,t=1200;return device.isMobile&&(e=window.innerWidth,t=3*e/4),{width:e,height:t}}async function addROMFiles(e){let t=0;for(const n of e)""!==Module.getEmulatorNameForFilename(n.name.toLowerCase())?(await new Promise(t=>{const o=new FileReader;o.onload=async()=>{const{name:a,title:s,emulator:r}=await addGame(n.name,o.result);addGameToSelectList(s||a,n.name),1===e.length&&notify(`\n                  <h1>🎮Game added</h1>\n                  <p>\n                    ${s||a} (file ${n.name}) for <strong>${r}</strong> \n                    was successfully added to your list of games\n                  </p>\n                `,"success",5e3),t()},o.readAsArrayBuffer(n)}),t+=1):notify(`\n              <h1>💀Invalid ROM file</h1>\n              <p>\n                ${n.name} is not a supported ROM file\n              </p>\n            `,"danger",5e3);e.length>1&&notify(`\n            <h1>🎮Games added</h1>\n            <p>\n              <strong>${t} ROMs</strong> were added to your collection\n            </p>\n          `,"success",5e3)}function addGameToSelectList(e,t){const n=document.createElement("option");n.innerHTML=`${e} (${t})`,n.value=t,select.appendChild(n)}async function populateSelectGameList(){const e=await listGames();if(0===e.length)return notify("\n            <h1>👋First time around?</h1>\n            <p>\n              Click <strong>Add ROMs</strong> to get started\n            </p>\n          ","success",5e3);e.forEach(({title:e,name:t,filename:n})=>addGameToSelectList(e||t,n));const t=localStorage.getItem(LAST_GAME);t&&(select.value=t)}function adjustScreenDisplay(){document.fullscreenElement?(device.isMobile||document.body.classList.add("fullscreen"),fullscreenButton.textContent="Restore"):(device.isMobile||document.body.classList.remove("fullscreen"),fullscreenButton.textContent="Fullscreen")}function toggleFullscreen(){document.fullscreenElement?exitFullScreen():requestFullscreen()}function exitFullScreen(){document.exitFullscreen()}function requestFullscreen(){device.isMobile?document.body.requestFullscreen():mainElement.requestFullscreen()}function setupAndShowController(e,t,n){const o=e.querySelectorAll("button");e.display="block",e.style.opacity=1,e.style.bottom=0,Module.connectPeripheral(t,n),o.forEach(e=>{e.addEventListener("touchstart",()=>Module.setButton(t,e.value,1)),e.addEventListener("touchend",()=>Module.setButton(t,e.value,0))})}function hideAndResetController(e){e.style.opacity=0,e.style.bottom="-200px",setTimeout(()=>{e.display="none;";const t=e.cloneNode(!0);e.parentNode.replaceChild(t,e)},100)}function displayControllerForEmulator(e){const t=document.querySelectorAll("#controllers > div");for(const n of t){const{console:t,port:o,type:a}=n.dataset;t==e?setupAndShowController(n,o,a):hideAndResetController(n)}}function setKeymap(e){this.onKeydown&&window.removeEventListener("keydown",this.onKeydown),this.onKeyup&&window.removeEventListener("keydown",this.onKeyup);const{port:t,type:n}=e.dataset,o={};e.querySelectorAll(".keymap").forEach(e=>{const t=e.querySelector(".button").textContent;let n=e.querySelector(".key").textContent;1===n.length&&(n=n.toLowerCase()),o[n]=t}),Module.connectPeripheral(t,n),this.onKeydown=({key:e})=>o[e]&&Module.setButton(t,o[e],1),this.onKeyup=({key:e})=>o[e]&&Module.setButton(t,o[e],0),window.addEventListener("keydown",this.onKeydown),window.addEventListener("keyup",this.onKeyup)}function setKeymapForEmulator(e){const t=document.querySelectorAll("#keymaps > div");for(const n of t){const{console:t}=n.dataset,o=t==e;n.style.display="none",o&&(setKeymap(n),n.style.display="flex")}}function toggleKeymap(){"Show keymap"===toggleKeymapButton.textContent?(keymapsElement.style.display="block",toggleKeymapButton.textContent="Hide keymap"):(keymapsElement.style.display="none",toggleKeymapButton.textContent="Show keymap")}window.addEventListener("focus",()=>{devtools.enabled||!Module.info.isRunning||wasPaused||setResume()}),window.addEventListener("blur",()=>{!devtools.enabled&&Module.info.isRunning&&(wasPaused="Resume"===pauseButton.textContent,wasPaused||setPause())}),window.onerror=function(){Module.setStatus("Exception thrown, see JavaScript console"),spinnerElement.style.display="none"};const gamepadControllers={"Controller Port 1":null,"Controller Port 2":null,"Controller Port 3":null,"Controller Port 4":null},gamepadButtonKeymaps={"Xbox 360 Controller (XInput STANDARD GAMEPAD)":["A","B","X","Y","L","R","L","R","Select","Start",null,null,"Up","Down","Left","Right"],"Wireless Controller (STANDARD GAMEPAD Vendor: 054c Product: 05c4)":["A","B","X","Y","L","R","L","R","Select","Start",null,null,"Up","Down","Left","Right"],"Pro Controller (STANDARD GAMEPAD Vendor: 057e Product: 2009)":["A","B","X","Y","L","R","L","R","Select","Start",null,null,"Up","Down","Left","Right","Select","Start"]};function connectGamepad(e){if(!gamepadButtonKeymaps[e.id])return notify(`\n              <h1>😲 Cannot connect gamepad</h1>\n              <p>\n                Gamepad detected but no button mappings are available for <strong>${e.id}</strong>\n              </p>\n            `,"warning");for(const[t,n]of Object.entries(gamepadControllers))if(!n)return gamepadControllers[t]=e.index,"Controller Port 1"!==t&&Module.info.isRunning&&Module.connectPeripheral(t,"Gamepad"),notify(`\n              <h1>🔗 Gamepad connected</h1>\n              <p>\n                <strong>${e.id}</strong> is connected to <strong>${t}</strong>\n              </p>\n            `,"success")}function disconnectGamepad(e){for(const[t,n]of Object.entries(gamepadControllers))if(e.index===n)return"Controller Port 1"!==t&&Module.disconnectPeripheral(t),gamepadControllers[t]=null,notify(`\n              <h1>💨 Gamepad disconnected</h1>\n              <p>\n                <strong>${e.id}</strong> is disconnected from <strong>${t}</strong>\n              </p>\n            `,"danger")}function connectAllGamepadPeripherals(){for(const[e,t]of Object.entries(gamepadControllers))t&&Module.connectPeripheral(e,"Gamepad")}function pollGamepads(){return navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():[]}function pollGamepadControllers(){const e=pollGamepads();for(const[t,n]of Object.entries(gamepadControllers)){if(null===n)continue;const{id:o,buttons:a}=e[n],s=gamepadButtonKeymaps[o];for(const[e,n]of a.entries())s[e]&&Module.setButton(t,s[e],n.value)}}async function startGame(e){if(gameLoadingElement.style.display="block",Module.info.isRunning&&(await gameSave(Module.info.currentGame),Module.info.isRunning=!1,Module.info.currentGame=null,Module.unload()),!Module.setEmulatorForFilename(e))throw new Error(`No matching emulator for ${select.value}`);const{emulator:t,romData:n}=await getGame(e),o=await gameLoad(e);Module.load(e,n,o),gameLoadingElement.style.display="none",localStorage.setItem(LAST_GAME,select.value),Module.info.isRunning=!0,Module.info.currentGame=e,device.isMobile?displayControllerForEmulator(t):setKeymapForEmulator(t),connectAllGamepadPeripherals(),setResume()}function stateSave(e,t){if(!Module.info.isRunning)return notify("\n            <h1>💣No games running</h1>\n            <p>\n              You need to <strong>start a game</strong> before you can save a state\n            </p>\n          ","danger",5e3);Module.stateSave(async n=>{const o=n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);await storeState(e,t,o)})}async function stateLoad(e,t){if(!Module.info.isRunning)return notify("\n            <h1>💣No games running</h1>\n            <p>\n              You need to <strong>start a game</strong> before you can load a state\n            </p>\n          ","danger",5e3);const n=await getState(e,t);if(!n)return notify("\n              <h1>💣No states found</h1>\n              <p>\n                You need to <strong>Save state</strong> before you can load a state\n              </p>\n            ","danger",5e3);Module.stateLoad(n)}async function gameSave(e){const t=Module.save();for(const[e,{buffer:n,byteOffset:o,byteLength:a}]of Object.entries(t))t[e]=n.slice(o,o+a);await storeSave(e,t)}async function gameLoad(e){return getSave(e)}function setPause(){fpsMeter.pause(),Module.stop(),document.body.classList.add("paused"),pauseButton.textContent="Resume"}function setResume(){document.body.classList.remove("paused"),fpsMeter.resume(),Module.start(),pauseButton.textContent="Pause"}function pauseOrResumeGame(){Module.info.isRunning&&("Pause"===pauseButton.textContent?setPause():setResume())}function notify(e,t,n){n=n||5e3,t=t||"warning";const o=document.createElement("div");o.classList.add("alert"),o.classList.add(`alert-${t}`),o.dataset.role="alert",o.innerHTML=e,notificationBoxContainerElement.appendChild(o),setTimeout(()=>o.classList.add("show"),10),setTimeout(()=>{o.classList.remove("show"),setTimeout(()=>notificationBoxContainerElement.removeChild(o),250)},n)}function showOverlay(){overlayElement.style.display="flex",setTimeout(()=>overlayElement.style.opacity=1,0)}function hideOverlay(){overlayElement.style.opacity=0,setTimeout(()=>overlayElement.style.display="none",250)}window.addEventListener("gamepadconnected",({gamepad:e})=>connectGamepad(e),!1),window.addEventListener("gamepaddisconnected",({gamepad:e})=>disconnectGamepad(e),!1)</script><script src=byuu-web.js async></script></body></html>